<div id="svg-wrapper">
	<svg id="canvas"></svg>
</div>

<script src="bower_components/d3/d3.js" charset="utf-8"></script>
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/underscore/underscore-min.js"></script>

<script src="bower_components/webcola/WebCola/cola.min.js"></script>

<script src="oo/namespace.js"></script>
<script src="oo/canvas.js"></script>
<script src="oo/node_generation.js"></script>
<script src="oo/edge_generation.js"></script>

<script src="oo/helpers.js"></script>

<script src="oo/glo.js"></script>
<script src="oo/api.js"></script>


<style>
	#svg-wrapper {
		border: 3px solid black;
		display: inline-block;
	}

	.axis {
		shape-rendering: crispEdges;
		font-size: 6pt;
	}

	.axis line, .axis path {
		fill: none;
		stroke: #000;
	}
</style>

<script>
	// var test_nodes = [
	// 	{id:0, name:"Coconut", color:"brown", size:-5},
	// 	{id:1, name:"Banana", color:"yellow", size:-15},
	// 	{id:2, name:"Apple", color:"red", size:30},
	// 	{id:3, name:"Donut", color:"pink", size:50}
	// ];
	// var test_edges = [
	// 	{id:0, source:0, target:2, weight:1.0},
	// 	{id:1, source:1, target:2, weight:2.0},
	// 	{id:2, source:2, target:3, weight:3.0}
	// ];
	// var test_node_attr = {
	// 	name:"discrete",
	// 	color:"color",
	// 	size:"continuous"
	// };
	// var test_edge_attr = {
	// 	weight:"continuous"
	// }

	d3.csv('data/LesMis/nodes.csv', function(nodes){
		d3.csv('data/LesMis/edges.csv', function(edges){
			d3.json('data/LesMis/node_attr.json', function(node_attr){
				d3.json('data/LesMis/edge_attr.json', function(edge_attr){
					
					nodes.forEach(function(d){
						d.id = +d.id
						d.modularity_class = +d.modularity_class
						d.degree = +d.degree
						d.weighted_degree = +d.weighted_degree
						d.eccentricity = +d.eccentricity
						d.closeness_centrality = +d.closeness_centrality
						d.betweenness_centrality = +d.betweenness_centrality
						d.authority = +d.authority
						d.hub = +d.hub
						d.page_rank = +d.page_rank
						d.component_id = +d.component_id
						d.clustering_coefficient = +d.clustering_coefficient
						d.number_of_triangles = +d.number_of_triangles
						d.eigenvector_centrality = +d.eigenvector_centrality
					})

					edges.forEach(function(d){
						d.source = +d.source
						d.target = +d.target
						d.id = +d.id
						d.weight = +d.weight
					})
					

					svg = d3.select("#canvas")
						.style("width",800)
						.style("height",400)
					glo = new GLO.GLO(svg)
						.nodes(nodes)
						.edges(edges)
						.node_attr(node_attr)
						.edge_attr(edge_attr)
						.draw()
							// .color_nodes_by("modularity_class")
							// // .position_nodes_on("y","betweenness_centrality")
							// .show_axis("y")
							// .position_nodes_on("x","gender")
							// .show_axis("x")
							// .display_edges_as_curved_lines()
							// // .evenly_distribute_nodes_on_within("x","modularity_class")
							// .position_nodes_on("y","modularity_class")
							// // .show_incident_edges()
							// // .aggregate_nodes_by(["modularity_class","gender"],"mean")
							// .size_nodes_by("count")
							// .aggregate_edges_by(["source.modularity_class","source.gender","target.modularity_class","target.gender"],"mean")
							// .size_edges_by("count")
							// .color_nodes_by("modularity_class")
							// .display_edges_as_curved_lines()
							// .align_nodes("left")
							// .evenly_distribute_nodes_on("y",{by:"modularity_class"})
							// .aggregate_nodes_by("modularity_class","mean")
							// .size_nodes_by("count")
							// .aggregate_edges_by(["source.modularity_class","source.gender","target.modularity_class","target.gender"],"mean")
							// .size_edges_by("count")
							// .clone_nodes()
							// .align_nodes("center")
							// .clone_edges()
							// .set_source_generation(2)
							// .set_target_generation(2)
							.color_nodes_by("modularity_class")
							.evenly_distribute_nodes_on("x",{by:"modularity_class"})
							.evenly_distribute_nodes_on("y",{by:"modularity_class"})
							.display_edges_as_squares()
				})
			})
		})
	})

	

</script>